<ul class="pagination pagination-sm no-margin pull-right">
    <li><a class="first">首页</a></li>
    <li><a class="pre">上一页</a></li>
    <li><a class="next">下一页</a></li>
    <li><a class="last">尾页</a></li>
    <li><a class="rowCount">总记录数(0)</a></li>
    <li><a class="pageCount">总页数(0)</a></li>
    <li><a class="pageCurrent">当前页(1)</a></li>
</ul>
<script type="text/javascript">
    $(function () {
        $("#pageId")
            .on("click", ".first,.pre,.next,.last", doJumpToPage)
    })

    //初始化分页信息
    function doSetPagination(page) {//pageObject {rowCount:10,pageCount:3,...}
        //1.初始化总记录数;
        $(".rowCount").html("总记录数(" + page.rowCount + ")");
        //2.初始化总页数
        $(".pageCount").html("总页数(" + page.pageCount + ")");
        //3.初始化当前页码值
        $(".pageCurrent").html("当前页(" + page.pageCurrent + ")");
        //4.存储page信息到指定对象上。
        //data函数为jquery中的一个数据绑定函数，其语法为data(key[,value]);,假如只有key表示取值，两个都有表示值的绑定
        $("#pageId").data("pageCurrent", page.pageCurrent);
        $("#pageId").data("pageCount", page.pageCount);
    }

    //处理分页点击事件
    function doJumpToPage() {
        //debugger
        //1.获得被点击对象的class属性值，基于此值判定被点击的对象
        //prop 函数为jquery中用于获取class属性值的一个函数，其语法为prop(key[,value]);
        var cls = $(this).prop("class");
        //2.基于class属性值，修改当前页码值
        //2.1获得当前页码值，获得总页数
        var pageCurrent = $("#pageId").data("pageCurrent");
        var pageCount = $("#pageId").data("pageCount");
        //2.2修改当前页码值，并存储(其它地方用到了可以获取)
        //2.2.1修改当前页码值
        if (cls == "first") {
            pageCurrent = 1;
        } else if (cls == "pre" && pageCurrent > 1) {//上一页
            pageCurrent--;
        } else if (cls == "next" && pageCurrent < pageCount) {
            pageCurrent++;
        } else if (cls == "last") {
            pageCurrent = pageCount;
        } else {
            return;
        }
        //2.2.2 存储当前页码值
        $("#pageId").data("pageCurrent", pageCurrent);
        //3.基于新页码值进行新的查询
        doGetObjects();
    }

    function doGetObjects() {
        //debugger;//断点调试
        //1.定义 url 和参数
        var url="log/doFindPageObjects"
        //? 请问 data 函数的含义是什么？(从指定元素上获取绑定的数据)
        //此数据会在何时进行绑定？(setPagination,doQueryObjects)
        var pageCurrent=$("#pageId").data("pageCurrent");
        //为什么要执行如下语句的判定，然后初始化 pageCurrent 的值为 1
        //pageCurrent 参数在没有赋值的情况下，默认初始值应该为 1.
        if(!pageCurrent) pageCurrent=1;
        var params={"pageCurrent":pageCurrent};
        //为什么此位置要获取查询参数的值?
        //一种冗余的应用方法，目的时让此函数在查询时可以重用。
        var username=$("#searchNameId").val();
        //如下语句的含义是什么？动态在 json 格式的 js 对象中添加 key/value,
        if(username) params.username=username;//查询时需要
        //2.发起异步请求
        //请问如下 ajax 请求的回调函数参数名可以是任意吗？可以,必须符合标识符
        的规范
        $.getJSON(url,params,function(result){
                //请问 result 是一个字符串还是 json 格式的 js 对象？对象
                doHandleResponseResult(result);
            }
        );
    }
</script>








